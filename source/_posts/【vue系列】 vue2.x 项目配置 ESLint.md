---
title: ã€vueç³»åˆ—ã€‘ vue2.x é¡¹ç›®é…ç½® ESLint
date: 2020-01-08
tags: 
---

ååŒå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸åŒçš„ç¼–ç ä¹ æƒ¯å†™å‡ºçš„ä»£ç ï¼Œå·®å¼‚å¾ˆå¤§ã€‚æ—¥å¸¸ç»´æŠ¤ä»£ç æˆ–è€…ä¿®å¤bugçš„æ—¶å€™æ—¶å€™ï¼Œçœ‹å„ç§é£æ ¼çš„ä»£ç ï¼Œå½±å“æ•ˆç‡ä¸è¯´ï¼Œè¿˜æœ‰å¯èƒ½æ”¹å‡ºä½çº§é—®é¢˜ã€‚ç›®å‰æˆ‘ä»¬çš„é¡¹ç›®è¿˜æ²¡æœ‰ä»£ç è§„èŒƒï¼Œæˆ‘å†³å®šè¦åšç‚¹æ”¹å˜ï¼Œäºæ˜¯è€ƒè™‘ä½¿ç”¨ `ESlint` æ¥åšä»£ç è§„èŒƒæ£€æŸ¥ã€‚

è€ƒå¯Ÿäº†[ESlintçš„å®˜æ–¹ç½‘ç«™](http://eslint.cn/)å’Œä¸€äº›æŠ€æœ¯è´´ï¼Œå†³å®šå…ˆç»™æˆ‘ä»¬å…¶ä¸­çš„ä¸€ä¸ª `Vue2.0` é¡¹ç›®é…ç½® `ESLint`ã€‚åœ¨é…ç½® `ESLint` è¿‡ç¨‹ä¸­èµ°äº†ä¸€äº›å¼¯è·¯ï¼ŒæŠŠé…ç½®è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿æ—¥åæŸ¥çœ‹ã€‚


<!--more-->


ååŒå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸åŒçš„ç¼–ç ä¹ æƒ¯å†™å‡ºçš„ä»£ç ï¼Œå·®å¼‚å¾ˆå¤§ã€‚æ—¥å¸¸ç»´æŠ¤ä»£ç æˆ–è€…ä¿®å¤bugçš„æ—¶å€™æ—¶å€™ï¼Œçœ‹å„ç§é£æ ¼çš„ä»£ç ï¼Œå½±å“æ•ˆç‡ä¸è¯´ï¼Œè¿˜æœ‰å¯èƒ½æ”¹å‡ºä½çº§é—®é¢˜ã€‚ç›®å‰æˆ‘ä»¬çš„é¡¹ç›®è¿˜æ²¡æœ‰ä»£ç è§„èŒƒï¼Œæˆ‘å†³å®šè¦åšç‚¹æ”¹å˜ï¼Œäºæ˜¯è€ƒè™‘ä½¿ç”¨ `ESlint` æ¥åšä»£ç è§„èŒƒæ£€æŸ¥ã€‚

è€ƒå¯Ÿäº†[ESlintçš„å®˜æ–¹ç½‘ç«™](http://eslint.cn/)å’Œä¸€äº›æŠ€æœ¯è´´ï¼Œå†³å®šå…ˆç»™æˆ‘ä»¬å…¶ä¸­çš„ä¸€ä¸ª `Vue2.0` é¡¹ç›®é…ç½® `ESLint`ã€‚åœ¨é…ç½® `ESLint` è¿‡ç¨‹ä¸­èµ°äº†ä¸€äº›å¼¯è·¯ï¼ŒæŠŠé…ç½®è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿æ—¥åæŸ¥çœ‹ã€‚

é¢„æµ‹è·å¾—çš„æ”¶ç›Šï¼š

- é¡¹ç›®ç¼–ç é£æ ¼ç»Ÿä¸€ï¼Œå¸ˆå‡ºä¸€äººï¼›
- å¼€å‘è¿‡ç¨‹ä¸­ä¿®å¤è¯­æ³•é”™è¯¯ï¼Œå‡å°‘æ½œåœ¨ `bug`ï¼›
- è§„å®šè§„èŒƒç¼–ç ï¼Œå‡å°‘ä»£ç å†—ä½™ï¼Œæé«˜ä»£ç è´¨é‡ï¼›

é¢„æœŸé£é™©ï¼š

æ‹…å¿ƒæ•´ä¸ªé¡¹ç›®æ·»åŠ äº† `ESLint`ï¼Œå…¶ä»–åŒäº‹å†’ç«ï¼Œå› ä¸ºæ˜¯å¤šé¡µé¢åº”ç”¨ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åšäº†é…ç½®ï¼Œæ–°éœ€æ±‚å¯ä»¥ä½¿ç”¨æ–°é…ç½®ï¼Œè€é¡¹ç›®å¯ä»¥è‡ªè¡Œé€‰æ‹©è¦ä¸è¦æ”¹ä¸€è½®eslintçš„æŠ¥å‘Šæç¤ºï¼Œè¿™æ¬¡ç»™æˆ‘ä»¬çš„ `Vue2.x` é¡¹ç›®é…ç½®äº† `ESLint` ä¹Ÿç»™å›¢é˜Ÿåšç‚¹è´¡çŒ®ã€‚

## é…ç½®ESLint

å’³å’³ï¼Œé…ç½®æµç¨‹æ¥äº†ã€‚

#### 1. å®‰è£… eslint
æ—¢ç„¶è¦ç”¨  `ESLint` ï¼Œå°±è¦å®‰è£…å®ƒï¼Œé€šè¿‡å‘½ä»¤ï¼š `cnpm I eslint -D` å®‰è£…ã€‚

#### 2. åˆå§‹é…ç½® eslint
`eslint` å®‰è£…å¥½ä¹‹åï¼Œè¿è¡Œ  `eslint â€”init`å‘½ä»¤åšäº›ç®€å•é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„æ£€æµ‹çš„ç¯å¢ƒã€æ–‡ä»¶ç±»å‹ç­‰ç­‰ã€‚è¿™æ­¥å®Œæˆï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ä¸ª `eslintrc.js` æ–‡ä»¶ã€‚ 

#### 3. å®‰è£… eslint-loader
æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦webpackæ¥ç¼–è¯‘ï¼Œéœ€è¦å¯¹åº”çš„loaderï¼Œå®‰è£… `eslint-loader`ï¼Œè¿è¡Œå‘½ä»¤ `cnpm I eslint-loader -D`ã€‚

> å¦‚æœæœ‰ `command not found: eslint` çš„æŠ¥é”™æç¤ºï¼Œå¯ä»¥è¿è¡Œ `./node_modules/.bin/eslint --init` æ¥è¿›è¡Œeslinté…ç½®åŒ–å®‰è£…

#### 4. é…ç½® webpack
æ‰“å¼€ `webpack` çš„ `config` é…ç½®æ–‡ä»¶é…ç½®ï¼š

```javascript
obj.module = {
    rules: [
        // ...
        { 
            test: /\.(js|vue)$/,
            loader: 'eslint-loader',
            enforce: 'pre',
            include: [ path.resolve(commonDir, '../index.js'), resolve('./pages'), resolve('./components')], // 
            options: {
                formatter: require('eslint-friendly-formatter')
            }
        }
    ]
};
```

#### 5. å®‰è£… eslint-friendly-formatter
> `eslint-friendly-formatter` è¿™ä¸ªæ¨¡å—æ˜¯ä¸ºäº†æ–¹ä¾¿æœ¬åœ°è§„èŒƒæ£€æŸ¥ä»£ç ã€‚è®°å¾—è¿è¡Œ `cnpm i eslint-friendly-formatter -D` å®‰è£…ä¸Šã€‚

#### 6. å®‰è£… babel-eslint
æ“ä½œåˆ°è¿™é‡Œå…³äº `eslint` çš„åŸºæœ¬é…ç½®å°±å®Œæˆäº†ï¼ŒæŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œå’¿ç«Ÿç„¶æœ‰ `parset` çš„æŠ¥é”™ï¼Œè¯´æœ€æ–°çš„eslintè§£ææœ‰é—®é¢˜ã€‚æŸ¥è¯¢èµ„æ–™æ˜¯è¯´éœ€è¦ `babel-eslint`ï¼ŒæŒ‰ä¾èµ–å®‰è£…çš„æ–¹å¼å®‰è£…ä¸Šã€‚

#### 7. å®‰è£… eslint-plugin-vue
`Vue.js` çš„å®˜æ–¹ `ESLint` æ’ä»¶ï¼š `eslint-plugin-vue` ï¼Œè¿™ä¸ªæ’ä»¶å…è®¸ æˆ‘ä»¬ä½¿ç”¨ `ESLint` æ£€æµ‹ `.vue` æ–‡ä»¶çš„ `<template>` å’Œ `<script>`ï¼Œæœ‰åŠ©äºå®æ—¶æ£€æµ‹ä»£ç ã€‚ æŠŠè¿™ä¸ªæ’ä»¶å®‰è£…ä¸Šï¼Œæœ€ç»ˆçš„ `.eslintrc.js`: 

```javascript
module.exports = {
    "root": true,
    "env": {
        "browser": true,
        "es6": true
    },
    "extends": [
        "eslint:recommended",
        "plugin:vue/essential"
    ],
    "globals": {
        "Atomics": "readonly",
        "SharedArrayBuffer": "readonly"
    },
    "parserOptions": {
        "parser": 'babel-eslint',
        "ecmaVersion": 2018,
        "sourceType": "module"
    },
    "plugins": [
        "vue"
    ],
    "rules": {
    }
};
```
é…ç½®å‚æ•°ï¼š
- root ä¸ºtrueæ ¹é…ç½®æ–‡ä»¶ï¼Œå¦åˆ™ä¼šæŒ‰ç…§ç›®å½•æ ‘å‘ä¸Šæœç´¢
- env æ‰§è¡Œç¯å¢ƒ
- extends å¯¹åŸºç¡€é…ç½®è¿›è¡Œæ‰©å±•ï¼Œå¯ä»¥é…ç½®å…±äº«é…ç½®åŒ…  `eslint-config-airbnb`ç­‰ã€‚é…ç½®åŒ…éœ€è¦å®‰è£…ã€‚
- globals æŒ‡å®šå…¨å±€å˜é‡ï¼Œæ— è§† no-undef è§„åˆ™
- parserOptions è¯­æ³•è§£æå™¨é€‰é¡¹
- plugins æ’ä»¶ ï¼Œæ’ä»¶å‘½åè§„èŒƒæ˜¯ `eslint-plugin-` ä¸ºå‰ç¼€
- rules æ ¡éªŒè§„åˆ™

#### 8. é…ç½®å°ç»“
- éœ€è¦å®‰è£…çš„ä¾èµ–æœ‰
```
cnpm i eslint eslint-loader eslint-friendly-formatter babel-eslintÂ  eslint-plugin-vue  -D
```
- webpack é…ç½®
- .eslintrc.js  é…ç½®

é…ç½®å®Œäº‹ï¼Œé¡¹ç›®è·‘èµ·æ¥ä¸€å †çš„æŠ¥é”™ï¼Œæ¥æ¥æ¥ï¼ŒğŸ’ƒå¼€å§‹è‡ªæˆ‘æŠ˜ç£¨å§ã€‚ç»å†ç£¨ç»ƒæ‰èƒ½å†™å‡ºæ›´ä¼˜é›…æ›´è§„èŒƒçš„ä»£ç ã€‚çœ‹ç€é¡µé¢ä¸å¤šï¼ŒèŠ±äº†å‡ ä¸ªå°æ—¶æ¥å¤„ç† `ESLint` çš„è­¦å‘Šå’ŒæŠ¥é”™ã€‚ğŸ˜“


## é…ç½®é—®é¢˜
#### Use the latest vue-eslint-parser

åœ¨[eslint-plugin-vueå®˜ç½‘](https://eslint.vuejs.org/user-guide/#faq)çœ‹åˆ°å…³äºè¿™ä¸ªé—®é¢˜çš„è§£é‡Šå’Œè§£å†³æ–¹æ¡ˆ:

`eslint-plugin-vue` é‡Œçš„å¤§å¤šæ•°è§„åˆ™éƒ½éœ€è¦ `vue-eslint-parser` æ¥è§£æ `template` çš„ASTï¼Œ ç„¶è€Œ `babel-eslint` å’Œ `vue-eslint-parser` åœ¨è§£æä¸Šæœ‰å†²çªï¼Œè§£å†³åŠæ³•æ˜¯æŠŠ `"parser": "babel-eslint",` ç§»å…¥åˆ° `parserOptions` å†…ã€‚

![](https://user-gold-cdn.xitu.io/2020/1/9/16f883f2c8ba9c24?w=1000&h=593&f=jpeg&s=163247)

```javascript
- "parser": "babel-eslint",
+ "parser": "vue-eslint-parser",
  "parserOptions": {
+     "parser": "babel-eslint",
      "sourceType": "module"
  }
```

## ç–‘é—®
è¿™æ¬¡é…ç½®ESLintï¼Œç•™ä¸‹äº†ä¸€äº›ç–‘æƒ‘ï¼Œå¾—ç©ºæ‰’æºç å§ã€‚

- `eslint` æ˜¯å¦‚ä½•æ£€æŸ¥ä»£ç çš„ï¼Ÿ
- `eslint-loader` éƒ½å¤„ç†äº†ä»€ä¹ˆï¼Ÿ
- ä¸ºä»€ä¹ˆéœ€è¦ `eslint-friendly-formatter`ï¼Ÿ
- ä¸ºä»€ä¹ˆç”¨ `babel-eslint`ï¼Œå®ƒæ˜¯æ€æ ·å·¥ä½œçš„ï¼Ÿ
- ä¸ºä»€ä¹ˆéœ€è¦ `eslint-plugin-vue`ï¼Ÿ

#### 1. `ESLint` æ˜¯å¦‚ä½•æ£€æŸ¥ä»£ç çš„
å‡ºäºå¯¹è¿™ä¸ªé—®é¢˜çš„ç–‘æƒ‘ï¼Œå»æŸ¥äº†ä¸€äº›èµ„æ–™ï¼Œäº†è§£äº† [JS Linter è¿›åŒ–å²](https://zhuanlan.zhihu.com/p/34656263)ã€‚`ESLint`  çš„æ ¸å¿ƒè¯‰æ±‚æ˜¯å°†ä»£ç è§£æä¸ä»£ç æ£€æŸ¥é€»è¾‘åˆ†å¼€ï¼Œæ”¯æŒè‡ªå®šä¹‰è§„åˆ™ï¼Œæ¯ä¸ªè§„åˆ™æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œè¶…å¼ºçš„å¼€å‘èƒ½åŠ›è®©ESLintå˜çš„æ›´å¥½ç”¨ã€‚

å¼•ç”¨JS Linter è¿›åŒ–å²çš„ä¸€æ®µè¯ï¼š
>  ESLint æ ¸å¿ƒéƒ¨åˆ†ä¸“æ³¨äºé…ç½®ç”Ÿæˆã€è§„åˆ™ç®¡ç†ã€ä¸Šä¸‹æ–‡ç»´æŠ¤ã€éå† ASTã€æŠ¥å‘Šäº§å‡ºç­‰ä¸»æµç¨‹ã€‚ç›®å‰ ESLint æ”¯æŒè‡ªå®šä¹‰çš„è§£æå™¨ã€è§„åˆ™æ’ä»¶ã€é¢„ç¼–è¯‘æ’ä»¶ã€ç»“æœæŠ¥å‘Šï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªå¹³å°ï¼Œå¯¹æ ¸å¿ƒçš„æµç¨‹è®¾å®šçº¦æŸï¼Œå¹¶å¼€æ”¾å„æ–¹é¢çš„èƒ½åŠ›ï¼Œä»è€Œé€‚åº”å¤æ‚å¤šå˜çš„å®é™…åœºæ™¯ã€‚

#### 2. ä¸ºä»€ä¹ˆéœ€è¦ `eslint-loader`
`eslint-loader` çš„ä½œç”¨æ˜¯è®© `webpack` å¯ä»¥å¤„ç†eslintã€‚

#### 3. ä¸ºä»€ä¹ˆéœ€è¦ `eslint-friendly-formatter`
çœ‹ `eslint-friendly-formatter`ä»‹ç»çš„æ—¶å€™ï¼Œè¯¥æ’ä»¶çš„ä½œè€…è¯´äº†ä¸‹é¢è¿™æ®µè¯ï¼š

![](https://user-gold-cdn.xitu.io/2020/1/10/16f8e09c6180cfb3?w=1514&h=258&f=jpeg&s=80891)

å¤§æ¦‚æ˜¯è®²ï¼Œä»–ä½¿ç”¨eslintçš„æ—¶å€™ï¼Œå‘ç°eslintçš„æŠ¥å‘Šæç¤ºåœ¨å‘½ä»¤è¡Œä¸­ä¸å‹å¥½ï¼Œä»–ä¸èƒ½åœ¨å‘½ä»¤è¡Œä¸­ç›´æ¥ç‚¹å‡»è·³è½¬åˆ°æŠ¥é”™çš„ä»£ç å¤„ï¼Œæ²¡æœ‰è®°å½•æŠ¥é”™çš„è¡Œåˆ—ï¼Œå¯¹åº”çš„æŠ¥é”™æç¤ºç›¸å…³æ–‡æ¡£ä¹Ÿä¸æ–¹ä¾¿ç›´æ¥æŸ¥çœ‹ã€‚äºæ˜¯ä»–å†™äº†è¿™ä¸ªæ’ä»¶æ¥å¤„ç†ä»¥ä¸Šé—®é¢˜ã€‚

ç°åœ¨è¿™ä¸ªæ’ä»¶è¢« eslint å®˜æ–¹æ¨èäº†ã€‚

#### 4. ä¸ºä»€ä¹ˆç”¨ `babel-eslint`ï¼Œå®ƒæ˜¯æ€æ ·å·¥ä½œçš„
é€šå¸¸æƒ…å†µä¸‹ `eslint` ä½¿ç”¨é»˜è®¤çš„è§£æå™¨ `babel`ã€‚ä½†æ˜¯ `eslint` æœ¬èº«ä¸èƒ½æ£€æµ‹å®éªŒé˜¶æ®µçš„è¯­æ³•ï¼Œ`ESNext` çš„å¾ˆå¤šå®éªŒé˜¶æ®µçš„è¯­æ³•æµè§ˆå™¨å‚å•†æ”¯æŒäº†ï¼Œå¼€å‘è€…ä¹Ÿåœ¨ç”¨ã€‚åˆšå¥½ `eslint` å…è®¸ä½¿ç”¨è‡ªå®šä¹‰è§£æå™¨ï¼Œæ‰€ä»¥å°±æœ‰äº† `babel-eslint` æ’ä»¶æ¥å¤„ç†è¿™ä¸ªäº‹ã€‚

`babel-eslint` å¯¼å‡ºäº† `eslint` å¯ä»¥ä½¿ç”¨çš„ASTã€‚

> AST æ˜¯ Abstract Syntax Treeï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰

#### 5. ä¸ºä»€ä¹ˆéœ€è¦ `eslint-plugin-vue`
`Vue` å•æ–‡ä»¶ç»„ä»¶ä¸æ˜¯æ™®é€šçš„ `Javascript`ï¼Œä¸èƒ½ä½¿ç”¨é»˜è®¤çš„è§£æå™¨ã€‚æ‰€ä»¥ä¸å¾—ä¸æœ‰äº† `eslint-plugin-vue` ç”¨äºå¯¹ `template` å’Œ `<script>` è¿›è¡Œè§£æç”Ÿæˆç‰¹å®šçš„å¢å¼ºçš„ `AST`ã€‚

å¯ä»¥å¯¹æ¯”ç€ [vueé£æ ¼æŒ‡å—](https://cn.vuejs.org/v2/style-guide/)çœ‹ã€‚ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„ `ä¼˜å…ˆçº§Aï¼šå¿…è¦çš„` çš„è§„èŒƒï¼Œå³ `plugin:vue/essential` ã€‚`plugin:vue/essential` çš„å…·ä½“è§„åˆ™å¯ä»¥è®¿é—®[eslint-plugin-vue](https://eslint.vuejs.org/rules/)å®˜ç½‘ã€‚

## å‚è€ƒ

[JS Linter è¿›åŒ–å²](https://zhuanlan.zhihu.com/p/34656263)

## æœ€å

å¾ˆå¤šå­¦ä¹  Vue çš„å°ä¼™ä¼´çŸ¥è¯†ç¢ç‰‡åŒ–ä¸¥é‡ï¼Œæˆ‘æƒ³æ•´ç†å‡ºç³»ç»ŸåŒ–çš„ä¸€å¥—å…³äºVueçš„å­¦ä¹ ç³»åˆ—åšå®¢ã€‚åœ¨è‡ªæˆ‘æˆé•¿çš„é“è·¯ä¸Šï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©æ›´å¤šäººè¿›æ­¥ã€‚

ä¸çœ‹åæ‚”ï¼ŒVueè¿›é˜¶ç³»åˆ—

- [ã€vue-è¿›é˜¶ã€‘vue-routeræºç åˆ†æ](https://juejin.im/post/6844904012630720526)
- [ã€vue-è¿›é˜¶ã€‘æ·±å…¥ç†è§£Vuex](https://juejin.im/post/6844904033602256910)
- [ã€vue-è¿›é˜¶ã€‘ä½ ä¸çŸ¥é“çš„ vue-devtools](https://juejin.im/post/6844904036152377351)
- [ã€vue-è¿›é˜¶ã€‘vue å’Œ echats ç»“åˆçš„æ˜¥å¤©ï¼Œvueæ’ä»¶vechart](https://juejin.im/post/6844904007605960711)
- [ã€vue-è¿›é˜¶ã€‘ä¼˜é›…åœ°ç”¨Vueç”ŸæˆåŠ¨æ€è¡¨å•](https://juejin.im/editor/posts/5ddb82b1f265da7e243d0a72)
- [ã€vue-è¿›é˜¶ã€‘ Vue2.0 é¡¹ç›®é…ç½® ESLint](https://juejin.im/post/6844904041063907341)
- [ã€vueè¿›é˜¶ã€‘vue2.0 é¡¹ç›®é…ç½® Mocha å•å…ƒæµ‹è¯•](https://juejin.im/post/6844904051839090702)

éƒ½çœ‹åˆ°è¿™é‡Œäº†ï¼Œèµ¶ç´§å…³æ³¨ `MiaoMiao`ã€ç‚¹èµã€è¯„è®ºç•™è¨€å•¦ï½








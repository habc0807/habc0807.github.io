---
title: v9支付前端文档
date: 2020-05-29 11:16:36
tags:
---


# 支付业务梳理文档

### 支付业务的简单划分

详情页 > 联合支付页 > 支付空白页

专题活动 > 支付空白页

### 为什么不在详情页直接支付

可以在详情页直接支付吗，请求后端接口，通过此接口完成微信登录授权和切支付，open_id的处理。可以在详情页支付。不再详情页支付的原因，本来详情页的逻辑就很重了，把支付加上会更重，在弹窗上展现联合支付，内容太多，用户体验不好。

### 详情页未登录去支付，登录在哪里处理？
- 一步版
- 两步版

不管是几步版，都需要处理一个事情就是登录处理，登录处理应该放到哪？详情页还是支付页，

如果是两步版，详情页不处理登录直接跳联合支付页，联合支付页是一个要求登录的页面，会在联合支付页调起支付。

如果是一步版，详情跳支付空白页，登录处理应该放到哪？如果放到支付空白页，支付空白页要先去进行登录，如果没有获取到open_id，还要去拿open_id，再回到支付空白页，从用户体验上看，加载空白页的加载进度条，不端重复，刚进度条有了又从新有了进度条。于是李博增加了一个接口用于处理在详情页微信登录，登录成功后再跳转到支付空白页。

> `order/loginpay/login/pre`此接口检查是否登录，没有的话跳转登录，有就切支付。
